{"version":3,"file":"HttpApp.js","names":["Context","_interopRequireWildcard","require","Effect","Exit","FiberRef","_Function","_GlobalValue","Layer","Option","Runtime","Scope","ServerError","ServerRequest","ServerResponse","internalMiddleware","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","toHandled","self","handleResponse","middleware","responded","withFiberRuntime","fiber","request","unsafeGet","getFiberRef","currentContext","HttpServerRequest","preprocessResponse","response","handler","currentPreResponseHandlers","_tag","value","succeed","matchCauseEffect","onFailure","cause","flatMap","causeResponse","pipe","zipRight","failCause","onSuccess","tap","withTracer","tracer","uninterruptible","catchAllCause","scoped","undefined","_","void","exports","globalValue","Symbol","for","unsafeMake","none","appendPreResponseHandler","update","match","onNone","some","onSome","prev","withPreResponseHandler","dual","locallyWith","toWebHandlerRuntime","runtime","run","runFork","Promise","resolve","provideService","toWeb","withoutBody","method","fromWeb","signal","addEventListener","unsafeInterruptAsFork","clientAbortFiberId","once","toWebHandler","defaultRuntime","toWebHandlerLayer","layer","scope","runSync","make","close","runPromise","build","map","toRuntime","runner","extend","then"],"sources":["../../src/HttpApp.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}
{"version":3,"file":"search.js","names":["makeMatcher","needle","needleFirstVariationIndex","needleIndexes","needleChars","i","length","push","needleIndexesLen","exactMatch","chunk","start","noopMatch","_","__","makeState","needle_","TextEncoder","encode","needleLength","indexes","b","undefined","findIndex","needleFirstVariation","Buffer","firstByte","previousChunk","previousChunkLength","matchIndex","make","callback","seed","state","writeUint8Array","newChunk","Uint8Array","set","chunkLength","outer","j","startPosition","subarray","earliestIndex","len","index","writeBuffer","chunk_","isBuffer","from","allocUnsafe","pos","match","indexOf","end","write","globalThis"],"sources":["../../../src/internal/search.ts"],"sourcesContent":[null],"mappings":"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"}